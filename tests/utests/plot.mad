--[=[
 o-----------------------------------------------------------------------------o
 |
 | Plot module regression tests
 |
 | Methodical Accelerator Design - Copyright CERN 2016+
 | Support: http://cern.ch/mad  - mad at cern.ch
 | Authors: L. Deniau, laurent.deniau at cern.ch
 |          A.Z. Teska, aleksandra.teska at cern.ch
 | Contrib: -
 |
 o-----------------------------------------------------------------------------o
 | You can redistribute this file and/or modify it under the terms of the GNU
 | General Public License GPLv3 (or later), as published by the Free Software
 | Foundation. This file is distributed in the hope that it will be useful, but
 | WITHOUT ANY WARRANTY OF ANY KIND. See http://gnu.org/licenses for details.
 o-----------------------------------------------------------------------------o

  Purpose:
  - Provide regression test suites for the plot module.

 o-----------------------------------------------------------------------------o
]=]

local plot in MAD
local track, beam, functor, option in MAD

-- locals ---------------------------------------------------------------------o

local tbl = MAD.mtable 'to_plot'{ {'name'}, 'x', 'y' }
tbl = tbl + {'d',1 ,1 *2}
tbl = tbl + {'d',2 ,2 *2}
tbl = tbl + {'d',3 ,3 *2}
tbl = tbl + {'d',4 ,4 *2}
tbl = tbl + {'d',5 ,5 *2}
tbl = tbl + {'d',6 ,6 *2}
tbl = tbl + {'d',7 ,7 *2}
tbl = tbl + {'d',8 ,8 *2}
tbl = tbl + {'d',9 ,9 *2}
tbl = tbl + {'d',10,10*2}

plot( tbl )
--[[
local quadrupole, sequence in MAD.element
local beam in MAD
local fmt = MAD.option.format
MAD.option.format = "%-18.12g" -- MAD-X default output
local beam = beam { particle='proton', energy=450 }
local seq = sequence 'seq' { refer = 'entry',
  quadrupole 'qf' { l=3, k1 := kqf }
}
for k=-10,10, 1 do
  kqf = k*0.1
  local tbl = track { sequence=seq, beam=beam, method='simple', nst=5, X0= {-1e-3, 2e-4 ,3e-3, 0,0, 5e-3}}
   local n = #tbl
   for i=1,n do
     print('\n MADNG_QUAD', tbl.s[i], kqf,tbl.x[i],tbl.px[i],tbl.y[i],tbl.py[i],tbl.t[i],tbl.pt[i])
   end
end
option.format = fmt
]]

-- end ------------------------------------------------------------------------o
